(this["webpackJsonpmy-tts"]=this["webpackJsonpmy-tts"]||[]).push([[0],{225:function(e,t,r){},227:function(e,t,r){},249:function(e,t){},251:function(e,t){},261:function(e,t){},263:function(e,t){},290:function(e,t){},291:function(e,t){},296:function(e,t){},298:function(e,t){},305:function(e,t){},324:function(e,t){},340:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r.n(n),a=r(44),s=r.n(a),i=r(20),d=r.n(i),o=r(3),l=(r(224),r(21)),j=r(348),b=r(349),u=r(341),h=r(350),x=r(351),O=r(352),p=r(353),v=r(354),y=(r(225),c.a.createContext()),f=r(342),g=r(1),m=Object(l.a)((function(e){var t=Object(n.useContext)(y);return Object(g.jsxs)(o.x,{id:e,children:[Object(g.jsx)(o.y,{children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"}),Object(g.jsx)(o.o,{children:Object(g.jsx)(o.G,{onClick:function(){t.setModal("bindCard")},expandable:!0,before:Object(g.jsx)(f.a,{}),children:"\u041f\u0440\u0438\u0432\u044f\u0437\u0430\u0442\u044c \u0434\u0440\u0443\u0433\u0443\u044e \u043a\u0430\u0440\u0442\u0443"})})]})})),C=Object(l.a)((function(e){var t=Object(n.useContext)(y);return Object(g.jsxs)(o.x,{id:e,children:[Object(g.jsx)(o.y,{children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),Object(g.jsxs)(o.o,{children:[Object(g.jsxs)(o.k,{children:[Object(g.jsx)(o.p,{weight:"medium",style:{marginBottom:16},children:"\u041c\u043e\u0439 \u0422\u0422\u0421"}),Object(g.jsx)(o.N,{weight:"regular",style:{marginBottom:9},children:"\u041d\u0435\u043e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439 \u0441\u0435\u0440\u0432\u0438\u0441 \u0434\u043b\u044f \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430 \u0431\u0430\u043b\u0430\u043d\u0441\u0430 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u043d\u044b\u0445 \u043a\u0430\u0440\u0442 \u0422\u044e\u043c\u0435\u043d\u0441\u043a\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u0438. \u0415\u0441\u043b\u0438 \u0435\u0441\u0442\u044c \u0432\u043e\u043f\u0440\u043e\u0441\u044b \u043f\u043e \u043f\u043e\u0432\u043e\u0434\u0443 \u0434\u0430\u043d\u043d\u043e\u0433\u043e \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f, \u0442\u043e \u043d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u043c\u043d\u0435 \u0432 \u043b\u0438\u0447\u043a\u0443 @nitroauth"}),Object(g.jsx)(o.K,{weight:"regular",style:{color:"var(--text_secondary)"},children:"\u0414\u043b\u044f \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0435\u043d\u0438\u044f \u0434\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0441\u0432\u043e\u044e \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u043d\u0443\u044e \u043a\u0430\u0440\u0442\u0443"})]}),Object(g.jsx)(o.G,{onClick:function(){t.setModal("bindCard")},expandable:!0,before:Object(g.jsx)(f.a,{}),children:"\u041f\u0440\u0438\u0432\u044f\u0437\u0430\u0442\u044c \u043a\u0430\u0440\u0442\u0443"})]})]})})),k=r(149),S=r(343),P=r(344),w=function(e){return e.match(Object(k.a)(/((?:(?!\.)[\s\S])*)\.[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+(.*),[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]\u0437\u043E\u043D\u044B/,{number:1,route:2})).groups},M=Object(l.a)((function(e){var t=Object(n.useContext)(y),r=t.user.card.history.map((function(e){return Object(g.jsx)(o.E,{"data-type":e.type,onClick:function(){t.setModal("eventDetails",e)},before:Object(g.jsx)(o.d,{size:48,children:Object(g.jsx)("span",{style:{color:"var(--accent)"},children:"payment"===e.type?w(e.route).number:Object(g.jsx)(S.a,{})})}),caption:e.date,after:"".concat("payment"===e.type?"-":"+"," ").concat(e.sum," \u20bd"),children:"payment"===e.type?w(e.route).route:"\u041f\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0431\u0430\u043b\u0430\u043d\u0441\u0430"},e.date)}));return Object(g.jsxs)(o.x,{id:e,children:[Object(g.jsx)(o.y,{children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u043f\u043e\u0435\u0437\u0434\u043e\u043a"}),r.length>0?Object(g.jsx)(o.o,{children:r}):Object(g.jsx)(o.o,{children:Object(g.jsx)(o.C,{icon:Object(g.jsx)(P.a,{}),children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u043f\u0443\u0441\u0442\u0430"})})]})})),E=Object(l.a)((function(e){return Object(g.jsxs)(o.x,{id:e,children:[Object(g.jsx)(o.y,{children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),Object(g.jsx)(o.B,{})]})})),I=r(345),F=(r(227),Object(l.a)((function(e){var t=Object(n.useContext)(y);return Object(g.jsxs)(o.x,{id:e,children:[Object(g.jsx)(o.y,{children:"\u041d\u043e\u0432\u043e\u0441\u0442\u0438"}),Object(g.jsx)(o.D,{isFetching:t.news.isLoading,onRefresh:t.fetchNews,children:t.news.items.length>0?Object(g.jsx)(o.o,{mode:"plain",children:Object(g.jsx)(o.g,{style:{justifyContent:"center"},size:"l",children:t.news.items.map((function(e){return Object(g.jsx)(o.j,{onClick:function(){t.setModal("openPost",{href:e.link})},style:{maxWidth:"528px",cursor:"pointer",whiteSpace:"pre-wrap"},text:e.excerpt.trim(),header:e.title,caption:e.publish_date.split("+")[0]},e.id)}))})}):Object(g.jsx)(o.o,{children:Object(g.jsx)(o.C,{icon:Object(g.jsx)(I.a,{}),children:"\u041d\u043e\u0432\u043e\u0441\u0442\u0435\u0439 \u043d\u0435\u0442"})})})]})}))),G=r(346),_=r(347),A=Object(l.a)((function(e){var t=Object(n.useContext)(y);return Object(g.jsxs)(o.x,{id:e,children:[Object(g.jsx)(o.y,{children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),Object(g.jsxs)(o.o,{children:[Object(g.jsx)(o.g,{size:"l",children:Object(g.jsx)(o.f,{size:"l",children:Object(g.jsxs)("div",{style:{padding:25},children:[Object(g.jsxs)(o.O,{level:"3",weight:"medium",children:["\u041a\u0430\u0440\u0442\u0430 \xab",t.user.card.ltype,"\xbb"]}),Object(g.jsx)(o.H,{}),Object(g.jsxs)(o.O,{style:{color:"var(--accent)"},level:"1",weight:"bold",children:[t.user.card.balance," ","\u20bd"]})]})})}),Object(g.jsx)(o.H,{}),Object(g.jsx)(o.G,{disabled:!0,children:Object(g.jsx)(o.r,{header:"\u041e\u0441\u0442\u0430\u0442\u043e\u043a \u043b\u044c\u0433\u043e\u0442\u043d\u044b\u0445 \u043f\u043e\u0435\u0437\u0434\u043e\u043a",children:t.user.card.exemption_balance})}),Object(g.jsx)(o.G,{disabled:!0,children:Object(g.jsx)(o.r,{header:"\u041d\u043e\u043c\u0435\u0440 \u043a\u0430\u0440\u0442\u044b",children:t.user.card.card})}),Object(g.jsx)(o.G,{disabled:!0,children:Object(g.jsx)(o.r,{header:"\u0420\u0435\u0433\u0438\u043e\u043d",children:t.user.card.region})}),Object(g.jsx)(o.F,{style:{margin:"12px 0"}}),Object(g.jsx)(o.G,{onClick:function(){t.fetchUser()},expandable:!0,before:Object(g.jsx)(G.a,{}),children:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"}),Object(g.jsx)(o.G,{onClick:function(){t.setModal("pay")},expandable:!0,before:Object(g.jsx)(_.a,{}),children:"\u041f\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u044c"})]})]})})),B=Object(l.a)((function(){var e=Object(o.S)().viewWidth,t=Object(o.T)(),r=Object(n.useContext)(y),c=e<=o.R.MOBILE,a=e>=o.R.TABLET,s=t!==o.P,i=Object(g.jsxs)(o.w,{activeModal:r.nav.activeModal,children:[Object(g.jsx)(o.t,{id:"openPost",onClose:function(){return r.setModal(null)},actions:Object(g.jsx)(o.e,{onClick:function(){return r.setModal(null)},target:"_blank",href:r.nav.modalProps.href,size:"l",mode:"primary",children:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u043d\u043e\u0432\u043e\u0441\u0442\u0438"}),icon:Object(g.jsx)(j.a,{}),header:"\u041f\u0435\u0440\u0435\u0445\u043e\u0434 \u043a \u043d\u043e\u0432\u043e\u0441\u0442\u0438",subheader:"\u041e\u0442\u043a\u0440\u043e\u0435\u0442\u0441\u044f \u0434\u0430\u043d\u043d\u044b\u0439 \u043f\u043e\u0441\u0442 \u0432 \u043d\u043e\u0432\u043e\u0439 \u0432\u043a\u043b\u0430\u0434\u043a\u0435"}),Object(g.jsx)(o.t,{id:"pay",onClose:function(){return r.setModal(null)},actions:Object(g.jsx)(o.e,{onClick:function(){r.setModal(null)},target:"_blank",href:"https://tmn.pay2way.ru/tcard?c=".concat(r.user.cardId),size:"l",mode:"primary",children:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u043f\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044e"}),icon:Object(g.jsx)(b.a,{}),header:"\u041f\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u043d\u043e\u0439 \u043a\u0430\u0440\u0442\u044b",subheader:"\u0412 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438 \u044d\u0442\u043e\u0433\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u043d\u0435\u043b\u044c\u0437\u044f, \u043d\u043e \u0435\u0441\u0442\u044c \u043e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439 \u0441\u0430\u0439\u0442. \u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u043d\u0430 \u043a\u043d\u043e\u043f\u043a\u0443 \u043d\u0438\u0436\u0435!"}),Object(g.jsx)(o.u,{id:"eventDetails",onClose:function(){r.setModal(null)},header:Object(g.jsx)(o.v,{right:t===o.q&&Object(g.jsx)(o.z,{onClick:function(){r.setModal(null)},children:Object(g.jsx)(u.a,{})}),left:c&&t===o.a&&Object(g.jsx)(o.A,{onClick:function(){r.setModal(null)}}),children:"replenishment"===r.nav.modalProps.type?"\u041f\u043e\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435":"\u041f\u043e\u0435\u0437\u0434\u043a\u0430"}),children:Object(g.jsxs)(o.o,{children:[Object(g.jsx)(o.G,{disabled:!0,children:Object(g.jsxs)(o.r,{header:"\u0421\u0443\u043c\u043c\u0430",children:[r.nav.modalProps.sum," ","\u20bd"]})}),Object(g.jsx)(o.G,{disabled:!0,children:Object(g.jsx)(o.r,{header:"\u0414\u0430\u0442\u0430",children:r.nav.modalProps.date})}),Object(g.jsx)(o.G,{disabled:!0,children:Object(g.jsx)(o.r,{header:"\u0410\u0433\u0435\u043d\u0442",children:r.nav.modalProps.agent})}),"payment"===r.nav.modalProps.type?Object(g.jsx)(o.G,{disabled:!0,children:Object(g.jsx)(o.r,{header:"\u041f\u0443\u0442\u044c",children:r.nav.modalProps.route})}):"",Object(g.jsx)(o.F,{style:{margin:"12px 0"}}),Object(g.jsx)(o.G,{disabled:!0,children:Object(g.jsxs)(o.r,{header:"\u0411\u0430\u043b\u0430\u043d\u0441",children:[r.nav.modalProps.balance," ","\u20bd"]})}),"payment"===r.nav.modalProps.type?Object(g.jsx)(o.G,{disabled:!0,children:Object(g.jsx)(o.r,{header:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043b\u044c\u0433\u043e\u0442\u043d\u044b\u0445 \u043f\u043e\u0435\u0437\u0434\u043e\u043a",children:r.nav.modalProps.exemption_balance})}):""]})}),Object(g.jsx)(o.t,{id:"bindCard",onClose:function(){r.bindCardOnClose()},icon:Object(g.jsx)(h.a,{}),header:"\u041f\u0440\u0438\u0432\u044f\u0437\u043a\u0430 \u043a\u0430\u0440\u0442\u044b",subheader:"\u0415\u0441\u043b\u0438 \u0443 \u0412\u0430\u0441 \u0443\u0436\u0435 \u043f\u0440\u0438\u0432\u044f\u0437\u0430\u043d\u0430 \u043a\u0430\u0440\u0442\u0430, \u0442\u043e \u043d\u043e\u0432\u0430\u044f \u043a\u0430\u0440\u0442\u0430 \u0437\u0430\u043c\u0435\u043d\u0438\u0442 \u0442\u0435\u043a\u0443\u0449\u0443\u044e",actions:Object(g.jsx)(o.e,{onClick:function(){r.bindCard()},disabled:!r.bindCardProperties.submitButtonActive,size:"l",mode:"primary",loading:r.bindCardProperties.isFetching,children:"\u041f\u0440\u0438\u0432\u044f\u0437\u0430\u0442\u044c"}),children:Object(g.jsx)(o.n,{children:Object(g.jsx)(o.m,{status:r.bindCardProperties.isError?"error":"default",bottom:r.bindCardProperties.isError?r.bindCardProperties.errorMessage:"",children:Object(g.jsx)(o.s,{onChange:r.bindCardInputOnChange,placeholder:"\u041d\u043e\u043c\u0435\u0440 \u043a\u0430\u0440\u0442\u044b"})})})})]});return Object(n.useEffect)((function(){r.fetchUser()}),[]),Object(g.jsx)(o.c,{children:Object(g.jsxs)(o.J,{modal:i,header:s&&Object(g.jsx)(o.y,{separator:!1}),style:{justifyContent:"center"},children:[a&&Object(g.jsx)(o.I,{fixed:!0,width:"280px",maxWidth:"280px",children:Object(g.jsxs)(o.x,{children:[s&&Object(g.jsx)(o.y,{}),Object(g.jsxs)(o.o,{mode:"plain",children:[Object(g.jsx)(o.h,{disabled:"home"===r.nav.activeStory||!r.ready,style:"home"===r.nav.activeStory?{backgroundColor:"var(--button_secondary_background)",borderRadius:8}:{},"data-story":"home",onClick:r.onStoryChange,before:Object(g.jsx)(x.a,{}),children:"\u041a\u0430\u0440\u0442\u0430"}),Object(g.jsx)(o.h,{disabled:"history"===r.nav.activeStory||!r.ready,style:"history"===r.nav.activeStory?{backgroundColor:"var(--button_secondary_background)",borderRadius:8}:{},"data-story":"history",onClick:r.onStoryChange,before:Object(g.jsx)(O.a,{}),children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u043f\u043e\u0435\u0437\u0434\u043e\u043a"}),Object(g.jsx)(o.h,{disabled:"feed"===r.nav.activeStory||!r.ready,style:"feed"===r.nav.activeStory?{backgroundColor:"var(--button_secondary_background)",borderRadius:8}:{},"data-story":"feed",onClick:r.onStoryChange,before:Object(g.jsx)(p.a,{}),children:"\u041d\u043e\u0432\u043e\u0441\u0442\u0438"}),Object(g.jsx)(o.h,{disabled:"settings"===r.nav.activeStory||!r.ready,style:"settings"===r.nav.activeStory?{backgroundColor:"var(--button_secondary_background)",borderRadius:8}:{},"data-story":"settings",onClick:r.onStoryChange,before:Object(g.jsx)(v.a,{}),children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"})]})]})}),Object(g.jsx)(o.I,{animate:!a,spaced:a,width:a?"560px":"100%",maxWidth:a?"560px":"100%",children:Object(g.jsxs)(o.l,{activeStory:r.nav.activeStory,tabbar:!a&&r.ready&&Object(g.jsxs)(o.L,{children:[Object(g.jsx)(o.M,{onClick:r.onStoryChange,selected:"home"===r.nav.activeStory,"data-story":"home",text:"\u041a\u0430\u0440\u0442\u0430",children:Object(g.jsx)(x.a,{})}),Object(g.jsx)(o.M,{onClick:r.onStoryChange,selected:"history"===r.nav.activeStory,"data-story":"history",text:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f",children:Object(g.jsx)(O.a,{})}),Object(g.jsx)(o.M,{onClick:r.onStoryChange,selected:"feed"===r.nav.activeStory,"data-story":"feed",text:"\u041d\u043e\u0432\u043e\u0441\u0442\u0438",children:Object(g.jsx)(p.a,{})}),Object(g.jsx)(o.M,{onClick:r.onStoryChange,selected:"settings"===r.nav.activeStory,"data-story":"settings",text:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438",children:Object(g.jsx)(v.a,{})})]}),children:[Object(g.jsx)(o.Q,{id:"feed",modal:i,activePanel:"feed",children:Object(g.jsx)(F,{id:"feed"})}),Object(g.jsx)(o.Q,{id:"loading",activePanel:"loading",children:Object(g.jsx)(E,{id:"loading"})}),Object(g.jsx)(o.Q,{id:"newCard",activePanel:"newCard",children:Object(g.jsx)(C,{id:"newCard"})}),Object(g.jsx)(o.Q,{id:"history",activePanel:"history",children:Object(g.jsx)(M,{id:"history"})}),Object(g.jsx)(o.Q,{id:"settings",activePanel:"settings",children:Object(g.jsx)(m,{id:"settings"})}),Object(g.jsx)(o.Q,{id:"home",activePanel:"home",children:Object(g.jsx)(A,{id:"home"})})]})})]})})})),L=r(37),R=r.n(L),T=r(57),z=r(146),D=r(147),N=r(15),W=r(81),Q=r.n(W),U=r(148),K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:15;return Q()({baseURL:"https://api.tgt72.ru",url:"/api/v5/news",method:"GET",params:{limit:e}})},V=function(e){var t=(new Date).toLocaleDateString("en-GB").replace(/\//g,"."),r={baseURL:"https://api.tgt72.ru",url:"/api/v5/balance",method:"GET",params:{card:e,hash:Object(U.createHash)("md5").update("".concat(t,".").concat(e)).digest("hex")}};return Q()(r)},H=function(){function e(){var t=this;Object(z.a)(this,e),this.isEmbedded=d.a.isEmbedded(),this.nav={activeView:"home",activeStory:"loading",activePanel:"home",activeModal:null,modalProps:{},popout:null,snackbar:null},this.user={cardId:null,card:{}},this.news={isLoading:!0,items:[]},this.bindCardProperties={isError:!1,errorMessage:"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u043a\u0430\u0440\u0442\u044b",isFetching:!1,temporaryCardId:null,submitButtonActive:!1},this.onStoryChange=function(e){t.nav.activeStory=e.currentTarget.dataset.story},this.go=function(e){Object.assign(t.nav,e)},this.setModal=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.nav.modalProps;t.nav.activeModal=e,t.nav.modalProps=r},this.bindCardOnClose=function(){t.setModal(null),t.bindCardProperties.temporaryCardId=null,t.bindCardProperties.submitButtonActive=!1},this.bindCardInputOnChange=function(e){var r=e.currentTarget.value,n=19===r.length&&!Number.isNaN(Number(r));t.bindCardProperties.temporaryCardId=r,t.bindCardProperties.submitButtonActive=n},this.bindCardSetErrorMessage=function(e){t.bindCardProperties.errorMessage=e},this.bindCardSetError=function(){t.bindCardProperties.isFetching=!1,t.bindCardProperties.isError=!0,setTimeout((function(){Object(N.g)((function(){t.bindCardProperties.isError=!1}))}),2e3)},this.bindCard=Object(T.a)(R.a.mark((function e(){var r,n,c;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(N.g)((function(){t.bindCardProperties.isFetching=!0})),r=t.bindCardProperties.temporaryCardId,e.prev=2,e.next=5,V(r);case 5:if(n=e.sent,"EMPTY_CARD"!==(c=n.data)){e.next=10;break}return t.bindCardSetError(),e.abrupt("return");case 10:if(!t.isEmbedded){e.next=19;break}return e.prev=11,e.next=14,d.a.send("VKWebAppStorageSet",{key:"cardId",value:r});case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(11),localStorage.setItem("cardId",r);case 19:localStorage.setItem("cardId",r),Object(N.g)((function(){t.bindCardProperties.isFetching=!1,t.user.cardId=r,t.user.card=c})),t.setModal(null),t.go({activeStory:"home"}),e.next=29;break;case 25:e.prev=25,e.t1=e.catch(2),e.t1.response.statusCode>=500?t.bindCardSetErrorMessage("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430, \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u043e\u043f\u044b\u0442\u043a\u0443 \u043f\u043e\u0437\u0436\u0435"):t.bindCardSetErrorMessage("\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u043a\u0430\u0440\u0442\u044b"),t.bindCardSetError();case 29:case"end":return e.stop()}}),e,null,[[2,25],[11,16]])}))),this.fetchNews=Object(T.a)(R.a.mark((function e(){var r,n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(N.g)((function(){t.news.isLoading=!0})),e.prev=1,e.next=4,K();case 4:r=e.sent,n=r.data,Object(N.g)((function(){t.news.isLoading=!1,t.news.items=n.objects})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),Object(N.g)((function(){t.news.isLoading=!1}));case 12:case"end":return e.stop()}}),e,null,[[1,9]])}))),this.fetchUser=Object(T.a)(R.a.mark((function e(){var r,n,c,a,s;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.go({activeStory:"loading"}),r=localStorage.getItem("cardId"),!t.isEmbedded){e.next=14;break}return e.prev=3,e.next=6,d.a.send("VKWebAppStorageGet",{keys:["cardId"]});case 6:n=e.sent,c=n.keys,r=c[0].value,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),localStorage.getItem("cardId");case 14:return t.fetchNews(),e.prev=15,e.next=18,V(r);case 18:if(a=e.sent,"EMPTY_CARD"!==(s=a.data)){e.next=23;break}return t.go({activeStory:"newCard"}),e.abrupt("return");case 23:Object(N.g)((function(){t.user.cardId=r,t.user.card=s})),t.go({activeStory:"home"}),e.next=30;break;case 27:e.prev=27,e.t1=e.catch(15),e.t1.response.statusCode>=500?t.go({activeStory:"error"}):t.go({activeStory:"newCard"});case 30:case"end":return e.stop()}}),e,null,[[3,11],[15,27]])}))),Object(N.d)(this),window.store=this}return Object(D.a)(e,[{key:"ready",get:function(){return!!this.user.cardId}}]),e}();d.a.send("VKWebAppInit"),s.a.render(Object(g.jsx)(o.i,{scheme:"space_gray",children:Object(g.jsx)(o.b,{children:Object(g.jsx)(y.Provider,{value:new H,children:Object(g.jsx)(B,{})})})}),document.getElementById("root"))}},[[340,1,2]]]);